<?xml version="1.0" encoding="UTF-8"?>
<!-- -*- nxml -*- -->
<postchunk>
  <section-def-cats>
    <def-cat n="n">
      <cat-item name="n"/>
    </def-cat>
    <def-cat n="n_n">
      <cat-item name="n_n"/>
    </def-cat>
    <def-cat n="adj_n">
      <cat-item name="adj_n"/>
    </def-cat>
    <def-cat n="adj_adj_n">
      <cat-item name="adj_adj_n"/>
    </def-cat>
    <def-cat n="det">
      <cat-item name="det"/>
      <cat-item name="detdd"/>
    </def-cat>
  </section-def-cats>

  
  <section-def-attrs>
    <def-attr n="gen">
      <attr-item tags="m"/>
      <attr-item tags="mf"/>
      <attr-item tags="nt"/>
      <attr-item tags="f"/>
      <attr-item tags="GD"/>
    </def-attr>
    <def-attr n="art">
      <attr-item tags="def"/>
      <attr-item tags="ind"/>
    </def-attr>
    <def-attr n="voice">
      <attr-item tags="pass"/>
    </def-attr>
    <def-attr n="nbr">
      <attr-item tags="sg"/>
      <attr-item tags="pl"/>
      <attr-item tags="sp"/>
      <attr-item tags="ND"/>
    </def-attr>
  </section-def-attrs>

  <section-def-vars>
    <def-var n="foo"/>
  </section-def-vars>

  <section-rules>
    <rule comment="CHUNK: det">
      <pattern>
        <pattern-item n="det"/>
      </pattern>
      <action>
        <choose><when>
          <test><not><equal><clip pos="0" part="gen"/><lit-tag v="mf"/></equal></not></test>
          <let><clip pos="1" part="gen"/><clip pos="0" part="gen"/></let>
        </when></choose>
        <choose><when>
          <test><equal><clip pos="1" part="gen"/><lit-tag v="GD"/></equal></test>
          <let><clip pos="1" part="gen"/><lit-tag v="m"/></let>
        </when></choose>
        <let><clip pos="1" part="nbr"/><clip pos="0" part="nbr"/></let>
        <choose><when>
          <test><equal><clip pos="1" part="nbr"/><lit-tag v="pl"/></equal></test>
          <let><clip pos="1" part="gen"/><lit v=""/></let>
        </when></choose>
        <out>
          <lu>
            <clip pos="1" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule comment="CHUNK: n">
      <pattern>
        <pattern-item n="n"/>
      </pattern>
      <action>
        <let><clip pos="1" part="art"/><clip pos="0" part="art"/></let>
        <out>
          <lu>
            <clip pos="1" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule comment="CHUNK: n_n">
      <pattern>
        <pattern-item n="n_n"/>
      </pattern>
      <action>
        <let><clip pos="2" part="art"/><clip pos="0" part="art"/></let>
        <out>
          <lu>
            <clip pos="1" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule comment="CHUNK: adj_n
                   Allow adjectives to become definite, but not indefinite.">
      <pattern>
        <pattern-item n="adj_n"/>
      </pattern>
      <action>
        <choose><when>
          <test><equal><clip pos="1" part="art"/><lit-tag v="ind"/></equal></test>
          <let><clip pos="1" part="art"/><clip pos="0" part="art"/></let>
        </when></choose>
        <let><clip pos="2" part="art"/><clip pos="0" part="art"/></let>

        <choose><when>
          <test><equal><clip pos="1" part="art"/><lit-tag v="def"/></equal></test>
          <let><clip pos="1" part="gen"/><lit v=""/></let>
        </when></choose>
        <out>
          <lu>
            <clip pos="1" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
    <rule comment="CHUNK: adj_adj_n
                   Allow adjectives to become definite, but not indefinite.">
      <pattern>
        <pattern-item n="adj_adj_n"/>
      </pattern>
      <action>
        <choose><when>
          <test><equal><clip pos="1" part="art"/><lit-tag v="ind"/></equal></test>
          <let><clip pos="1" part="art"/><clip pos="0" part="art"/></let>
        </when></choose>
        <let><clip pos="3" part="art"/><clip pos="0" part="art"/></let>

        <choose><when>
          <test><equal><clip pos="1" part="art"/><lit-tag v="def"/></equal></test>
          <let><clip pos="1" part="gen"/><lit v=""/></let>
        </when></choose>
        
        <choose><when>
          <test><equal><clip pos="2" part="art"/><lit-tag v="ind"/></equal></test>
          <let><clip pos="2" part="art"/><clip pos="0" part="art"/></let>
        </when></choose>
        <let><clip pos="3" part="art"/><clip pos="0" part="art"/></let>

        <choose><when>
          <test><equal><clip pos="2" part="art"/><lit-tag v="def"/></equal></test>
          <let><clip pos="2" part="gen"/><lit v=""/></let>
        </when></choose>
        <out>
          <lu>
            <clip pos="1" part="whole"/>
          </lu>
          <b pos="1"/>
          <lu>
            <clip pos="2" part="whole"/>
          </lu>
          <b pos="2"/>
          <lu>
            <clip pos="3" part="whole"/>
          </lu>
        </out>
      </action>
    </rule>
  </section-rules>
</postchunk>
