% Created 2009-09-15 Tue 22:47
\documentclass[11pt]{article}
\usepackage{freerbmt09}
\usepackage[utf8x]{inputenc}
\usepackage{times}
\usepackage{natbib}
\usepackage{url}
\usepackage{linguex}
\usepackage{latexsym}

\usepackage{hyperref}
\author{Jane Doe\\  Department of Computer Science \\  Nonesuch State University \\  Utopia, NS 12345 \\  {\tt jane.doe@cs.nsu.edu} \And  John Smith \\  Department of Linguistics \\  Another State University \\  Collegetown, AS 98765 \\    {\tt jsmith@ling.asu.edu}}

\title{Reuse of Free Resources in Machine Translation between Nynorsk and Bokmål}

\begin{document}

\maketitle

  \begin{abstract}
    We describe the development of a shallow-transfer machine
    translation system between Norwegian Nynorsk and Norwegian Bokmål
    built on the Apertium platform, using the free and open source
    resources Norsk Ordbank and the Oslo-Bergen (Constraint Grammar)
    tagger. We detail the integration of these and other resources in
    the system, the construction of the lexical and structural
    transfer, and give an evaluation of the translation quality and a
    comparison with another system.
  \end{abstract}

\section{Introduction}

The term \emph{Norwegian} covers a variety of related spoken dialects.
Up until the 1800's, Danish was the only written standard used in
Norway. Bokmål emerged through various reforms which brought the
written language closer to the spoken; Nynorsk however, was created
from the ground up with the purpose of representing all the spoken
dialects of Norway. As it is, certain dialects (especially around the
Oslo area) correspond more with Bokmål, while others are closer to
Nynorsk. Nynorsk is ``in a minority position in Norway, with
approximately 12\% of the users'' \citep{everson2000sln}, or around
450,000 people.

Although Nynorsk is in a minority position, there are quite good
linguistic resources available under Free licences, compared to many
languages with the same amount of speakers. We describe the creation
of a machine translation system between Nynorsk and
Bokmål\footnote{Available from
  \href{http://apertium.org}{http://apertium.org} } built using these
resources with the free and open source Apertium platform
\citep{corbi05oss}. In the following section we give an overview of
the Apertium platform and Constraint Grammar. Section
\ref{SEC:development} describes how the available resources were
integrated into Apertium, and how we dealt with lexical and syntactic
transfer (for which we did not have freely available resources). In
the next two sections we give an evaluation of the translation quality
and a discussion of the lessons learnt and how the system may be
further improved.

\section{Design}
 \label{SEC:design}

 The nn-nb language pair follows the design of the Apertium system
 \citep{corbi05oss}, a highly modular, shallow-transfer pipeline
 machine translation system. Dictionaries written in XML are compiled
 into reversible finite state transducers, so that word-for-word
 translations are possible in both directions using only two
 monolingual dictionaries (morphological analysis/generation) and one
 translational (transfer) dictionary. Both dictionary types make use of
 \emph{paradigms} to eg. generalise over common suffix sets (and
 their analyses), and \emph{directional constraints}, which state that
 a certain entry may be analysed, but not generated, or vice versa.

 First order hidden Markov models are used after analysis for
 part-of-speech disambiguation\footnote{Although there is now also the
   capability for second order HMM's \citep{sheikh2009trigram}. }.
 The transfer module is finite state based and allows three-stage
 chunking transfer, although nn-nb so far only uses one-stage
 transfer.
 De-/reformatters
 applied to the beginning and end of the pipeline lets one preserve
 formatting of various document types.

The nn-nb language pair differs from most of the other Apertium pairs
in using a Constraint Grammar module\footnote{Running on VISL CG-3,
  available from
  \href{http://beta.visl.sdu.dk/cg3.html}{http://beta.visl.sdu.dk/cg3.html}
} as a pre-disambiguator (before the statistical tagger). Constraint
Grammars \citep{karlsson1990cgf} are hand-written rules which, given
ambiguously tagged input (eg. the English word `read' tagged both as a
past and present tense verb), may SELECT one reading/analysis over all
the others, or REMOVE a certain reading from the set of analyses. The
last reading is never removed, although we may end up with several
readings if the input was in fact ambiguous or the grammar didn't
manage to remove what it should. Constraint Grammars may also MAP
(add) new tags to readings, typically syntactic function labels. Rules
may check in either direction for the existence of tags or even
specific words, over absolute or undefined distances.

\begin{itemize}
\item \textbf{SKRIV} more? something like ``CG's have shown 94\%  P/R \citet{someone}'' ?
\end{itemize} 


In the next section we describe the development and use of these
modules in nn-nb.

\section{Development}

  \label{SEC:development}
\subsection{Resources}

As our basis for the morphological analysis and generation, we used
Norsk
Ordbank\footnote{\href{http://www.edd.uio.no/prosjekt/ordbanken/}{http://www.edd.uio.no/prosjekt/ordbanken/}
}, a $>100,000$ lemma GPL full form dictionary. We also used the
morphological disambiguator of the Oslo-Bergen Tagger
\citep{hagen2000cbt}, a high quality GPL Constraint Grammar. Both of
these use the same tag scheme. They were converted into Apertium
formats and tag schemes, as described below.

We found no freely available bilingual dictionary, so this was created
using various both manual and automatic methods, along with transfer
rules to cope with syntactic differences and agreement. The following
sections detail the process.
\begin{itemize}

\item \textbf{SKRIV} mention KDE4 and bitextor web sites?\\

\end{itemize} 
\subsection{Analysis and generation}

Most Apertium language pairs use \emph{lttoolbox} for morphological
analysis and generation, which compiles XML-structured entries into
fast finite state transducers and allows generalisations to be made
across eg. common suffix paradigms. Norsk Ordbank is a full form
dictionary with morphological information (lemma, part-of-speech,
inflection, \ldots{}), this was semi-automatically transformed into
the lttoolbox format. First, one paradigm was created per lemma
(always creating the longest possible suffix), then any duplicate
paradigms were merged. \begin{itemize}

\item \textbf{SKRIV} example of an XML entry?\\

\end{itemize} 
\subsection{Disambiguation}

The Oslo-Bergen tagger and Norsk Ordbank use a different tagset from
Apertium. We want the resources used in nn-nb to be useful in creating
new Apertium language pairs, so we converted the tags to ones which
conform as much as possible to other Apertium dictionaries. Most tags
could be replaced one-to-one, although some were replaced with
Constraint Grammar sets. To exemplify the latter: the Oslo-Bergen
tagger uses the tags \texttt{<subst><appell>} and
\texttt{<subst><prop>} where Apertium uses \texttt{<n>} and
\texttt{<np>} respectively, so rules working on the single tag
\texttt{<subst>} were changed to work on the set consisting of the
tags \texttt{<n>} and \texttt{<np>}. Most of this conversion was done
using simple shell scripts.

\textbf{SKRIV} \texttt{texttt} for tags? or something else?\\


The Constraint Grammar runs as a pre-disambiguator, and doesn't always
manage to remove all spurious analyses. We run Apertium's statistical
disambiguator module after this step to make a final choice. An
unsupervised bigram model was trained on the Nynorsk and Bokmål
Wikipedias using the \texttt{apertium-tagger} \citep{todo}. Although
there is the possibility of more advanced statistical models using the
Apertium toolset
\citep[see~eg.~][]{sanchez2008utl,sheikh2009trigram}, so far we
have instead worked on improving the Constraint Grammar where we
spotted errors.

\subsection{Lexical transfer}

As mentioned, we found no freely available bilingual dictionaries
between Nynorsk and Bokmål, so this we had to build from the ground
up. Closed categories and some open-category entries were simply added
manually, but the bulk of the transfer lexicon, or translational
dictionary, was created more or less automatically using three main
methods.

First, exact matches were added where the morphology was the same for
both languages. Eg., if a noun lemma was the same in both languages,
and in both languages the noun could occur in the same forms
(singular/plural, definite/indefinite), it was considered a
translation. This quickly got us around 36,000 entries. There are two
problems with this method though. One is that it may introduce a lot
of false friends. However, for closely related languages with such
high overlap in the lexicon, the benefit outweighs the risk (and lists
of common false friends are not hard to come by in grammars). The
other problem is that we add many ``radical forms'', eg. Bokmål words
which exist in the Nynorsk dictionary but are far from being the most
natural sounding Nynorsk translation. We can easily put restrictions
on these forms so that they are only analysed, but not generated, but
finding all such pairs involves some work.

We also added entries where there were predictable changes, eg. the
Bokmål adjective suffix \emph{-lig} will typically be \emph{-leg} in Nynorsk,
etc. This process, also used by \citet[p.~4]{tyers2009dpm},
simply consists of
\begin{enumerate}
\item finding Bokmål entries without translations \item running string replacements on these for typical differences in
   substrings
\item checking whether the altered entries actually exist in the Nynorsk
   analyser
\end{enumerate}
There are no orthographic differences between the languages, but of
course lots of such morpheme/substring correspondences. The main run
of this method gave us about 2500 nouns and verbs\footnote{A technique
  used in other Apertium language pairs, which we haven't tried yet,
  is running a target language spell checker (which gives suggestions)
  on the missing source language words (replacing step 2 above), and
  then analysing the suggestion to find the lemma. }.

Finally, we added some entries using automatic word alignments. We
used two resources here: the KDE4 corpus of software translations
(about 400,000 words), and about 50,000 words of parallel text
gathered with the bitextor web crawler tool
\citep{sanchez2006eam}\footnote{Available
  from
  \href{http://websvn.kde.org/trunk/l10n-kde4/}{http://websvn.kde.org/trunk/l10n-kde4/}
  and
  \href{http://bitextor.sourceforge.net/}{http://bitextor.sourceforge.net/}
  respectively.} from Norwegian government web pages.

The KDE4 translations are in the \emph{gettext} (.po-file) format, for
which there are a lot of available tools. We first used the Translate
Toolkit\footnote{Available from
  \href{http://translate.sourceforge.net/wiki/toolkit/index}{http://translate.sourceforge.net/wiki/toolkit/index}
} tool \emph{poswap} to turn the English-Nynorsk and English-Bokmål
.po-files into Nynorsk-Bokmål files, then we ran \emph{poterminology},
a terminology extraction tool which gathers simple phrase pairs (all
subphrases which appear together over a certain threshold), taking
advantage of the typically short sentences\footnote{On average, the
  aligned translations are about 4.5 words long (including
  multi-sentence translations).} and high amount of repetition in
software translations. This gave us some hundreds of new terms with
very little work; however, many of the software terms were of course
not in the monolingual dictionaries and thus adding them requires some
manual labour.

We next ran Giza++ \citep{och2003scv} on a cleaned version of the KDE4
corpus to create word alignments. We also appended our existing
transfer lexicon to the corpus several times, to improve the
probability of correct alignments. We then ran these these alignments
through our morphological analysers, and fed them into the tool
ReTraTos \citep{caseli2006aib}, which extracts both phrases and
single-word translations from alignments, and converts them into
Apertium transfer entries (perhaps adding directional constraints). We
also followed this same process on the text gathered from web pages,
which was automatically crawled and sentence aligned with the bitextor
tool mentioned above.

The ReTraTos method gave translations for about 3500 entries which
were missing from the transfer lexicon; however, these still needed a
manual see through, and very many had to be altered slightly (eg.
changing directional constraints or morphological tags) or simply
discarded. Due to the amount of noise in this data, this method
required a lot of post-editing (and in our case functioning more as a
source of \emph{suggestions} for translations). Of course, a different
corpus might have achieved higher quality word alignments; either a
bigger corpus (Wu and Xia \citep[1994, in][p.~230]{caseli2006aib} used
a 3 million word corpus to induce an English–Chinese dictionary) or a
corpus of a different text type (\citet{caseli2006aib} used corpora
which were of similar sizes, but containing magazine text).

In addition to these three main methods, we also had some
user-contributed entries. We created a page on the Nynorsk Wikipedia
where users could suggest translations for those words which were
missing from the transfer lexicon (sectioned by part-of-speech), and
simply added these as they trickled in.


\subsection{Syntactic transfer}

Nynorsk and Bokmål do not have very many syntactic differences. There
are some minor differences in verb phrases, and some slightly more
complex differences in noun phrases\footnote{In the examples here,
  Bokmål appears above Nynorsk.}:

\setlength{\Exlabelsep}{1.1em} % was 1.3em
\alignSubExtrue % wasn't
\ex. \emph{Finite bokmål passive verbs are expressed with an auxiliary
  in Nynorsk (infinitive passives remain unchanged):}
\ag. Boken leses ikke alltid \\
Book.DEF read.PRES.PASS not always \\
\bg. Boka blir ikkje alltid lese\\
Book.DEF AUX not always read.PART \\
`The book isn't always read'
\cg. Om høsten fylles fjorden med sild\\
In fall.DEF fill.PRES.PASS fjord.DEF with herring\\
\dg. Om hausten blir fjorden fylt med sild\\
In fall.DEF AUX fjord.DEF fill.PRES.PASS with herring\\ 
`In fall, the fjord is filled with herring''

As \Last[a-b] show, we have to take into account that the verb might
have to occur after a string of adverbs. \Last[c-d] shows that in
certain constructions, the subject will occur between the auxiliary
and the finite verb (Norwegian being a V2 language). Norsk Ordbank
originally had one and the same entry for present and infinitive
passive verbs in Bokmål, this we had to split up, but fortunately for
us the Oslo-Bergen tagger was already pretty good at disambiguating
infinitives from finite verbs\footnote{We currently do
  not analyse the rather infrequent past passive form.}, so we apply a
transfer rule to the finite passive verbs in \Last[a-b]. \Last[c-d]
however, does not get analysed correctly yet.

\textbf{SKRIV} syntaksen til OBT, ``om restriksjonene opprettholdes, vil det bli mindre fisk''

\ex. \emph{Phrase-initial Bokmål genitives are expressed
  periphrastically, phrase-finally in Nynorsk:}
\ag. avisens siste utgivelse\\
newspaper.DEF.GEN last publication.IND\\
\bg. den siste utgjevinga til avisa\\
the last publication.DEF of newspaper.DEF\\
`the newspaper's last publication'\\
\cg. mitt nye luftputefartøy\\
my new hovercraft.IND\\
\dg. det nye luftputefartøyet mitt\\
the new hovercraft.DEF mine\\
`my new hovercraft'

\Last has certain exceptions; proper names are commonly used with the
genitive, as are certain frequent nouns (\emph{dagens siste} `today's
latest', \emph{verdas største} `the world's
greatest'). Of course, we can have strings of adjectives appearing
before each noun in \Last[a-d].

The transfer module matches fixed-length patterns of part-of-speech
tags and/or lemmas, on a left-to-right longest-first
[basis..wossname..]. 

\begin{itemize}
\item how did we solve it?
\item how didn't we solve it? (or, what are the problems)
\end{itemize}
\subsection{Summary}
\textbf{SKRIV}
Anything about regression testing and that stuff? (Ie. whenever we
  fix a certain transfer construction or disambiguation problem, we
  add a regression test to make sure we don't have to fix it again.)

\section{Evaluation}
 \label{SEC:eval}
We define naïve coverage as the proportion of words in a corpus which
are given at least one analysis by our monolingual
dictionaries. Testing on Nynorsk Wikipedia (5116174 words) and Bokmål
Wikipedia (27529115 words), we have 89.6\% and 88.2\% coverage,
respectively.

\subsection{Word Error Rate}
The Word Error Rate (WER) on a 3750 word Wikipedia article on
linguistics in the Bokmål to Nynorsk direction was 22.06\% when
including unknown words, although since 64.93\% of these were
free-rides (ie. the same in Bokmål and Nynorsk) anyway, the final WER
was 10.71\%. Typical free-rides include names, loan-words and special
terminology.

\begin{itemize}
\item Qualitative assessment\ldots{}

\begin{itemize}
\item Error types:

\begin{itemize}
\item lexical selection
\item disambiguation
\item transfer (eg. word order, ``mannen sin hest'')
\end{itemize}

\end{itemize}


\end{itemize}

\subsection{Bleu score}

Apertium is not the only MT system between Nynorsk and Bokmål. Another
system is
\textit{Nyno}\footnote{\href{http://www.nynodata.no}{http://www.nynodata.no}},
a commercial MT system translating from Bokmål to Nynorsk (but not the
other way around. In order to compare the systems, we translated an
unseen text (20667 words) from Bokmål to Nynorsk in both Apertium and
Nyno. The translation was compared to a set of x gold standards, and
the Bleu score of the respective systems was calculated.

\textbf{SKRIV} ut resultata frå Bleu score. Men først treng vi folk til å lage gullstandard.

Anything about Nyno? (Their web page says 74000 words, don't know
  about WER but the cool thing about Nyno is the interface, ie. the
  freedom of choice with variants and how the user can do the lexical
  selection.
  
  Yes, Nyno deserves a presentation for this.

\section{Discussion}

\begin{itemize}
\item We don't have any sort of compound handling, probably we could
  analyse a whole lot more with a trie or whatever, but there's also a
  compound handler in OBT that might be possible to integrate.

\begin{itemize}
\item *menneskehandel.
\item menneske. handel.
\end{itemize}
\item \textbf{SKRIV} noe om at nn-nb.po kan nyttast som TMX med Apertium?

\item ``Well-written'' nynorsk uses lots of periphrasis and MWE's, eg. particle
  verbs; we don't generate any such thing. A syntactic analysis might
  be useful here, although without being quite certain of where the
  relevant phrase ends, it'll be safer to stick with non-discontinuous
  target language translations.
\end{itemize}
On the Scandinavian language group, and expanding it for Apertium:
\begin{quote}
Morphologically, these four languages are equally distant from each
other, but the terminological differences are smaller between Nynorsk
and Bokmål than between the other two. \\
\citep{everson2000sln}
\end{quote}

\begin{itemize} \item reporting CG errors which were not
  related
  to the conversion back to the Oslo-Bergen tagger developers.
\end{itemize} 

\section*{Acknowledgements}

Development was funded as part of the Google Summer of
Code\footnote{\href{http://code.google.com/soc/}{http://code.google.com/soc/}
} programme. Thanks to mentors and OBT people.


\bibliographystyle{apalike}
\bibliography{apertium}

\end{document}